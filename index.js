import{a as L,i as N,S as W}from"./assets/vendor-DAK8oDSN.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const k="https://sound-wave.b.goit.study/api";async function z(e=1,t=8){try{return(await L.get(`${k}/artists`,{params:{page:e,limit:t}})).data}catch(n){throw console.error("Error fetching artists:",n),n}}async function J(e){try{return(await L.get(`${k}/artists/${e}`)).data}catch(t){throw console.error(`Error fetching artist with ID ${e}:`,t),t}}async function K(e){try{return(await L.get(`${k}/artists/${e}/albums`)).data}catch(t){throw console.error(`Error fetching albums for artist with ID ${e}:`,t),t}}async function Q(){try{const e=await L.get(`${k}/feedbacks`);return Array.isArray(e.data)?e.data:e.data.data&&Array.isArray(e.data.data)?e.data.data:[]}catch(e){throw console.error("Error fetching feedbacks:",e),e}}const T=new URL("/js_119_EddNik/assets/sprite-UW2HH8rk.svg",import.meta.url).href,y=document.getElementById("artist-modal"),X=y.querySelector(".modal-overlay"),Z=y.querySelector(".modal-close"),x=document.getElementById("loader"),q=document.getElementById("artist-albums"),ee=document.querySelector(".artist-gallery");let F=[];function te(e){if(!e||isNaN(e))return"-";const t=Math.floor(e/1e3),n=Math.floor(t/60),r=t%60;return`${n}:${r.toString().padStart(2,"0")}`}async function ne(e){y.classList.remove("hidden"),document.body.style.overflow="hidden",x.style.display="block";try{const t=await J(e);await se(t),x.style.display="none"}catch(t){console.error(t),x.textContent="Error loading data"}}async function se(e){document.getElementById("artist-name").textContent=e.strArtist,document.getElementById("artist-image").src=e.strArtistThumb||"";const t=document.getElementById("artist-years");e.intFormedYear&&e.intDiedYear?t.textContent=`Years active: ${e.intFormedYear} – ${e.intDiedYear}`:e.intFormedYear&&!e.intDiedYear?t.textContent=`Years active: ${e.intFormedYear} – present`:t.textContent="Years active: information missing";const n=document.getElementById("artist-gender"),r=document.getElementById("artist-members");e.strArtistType==="person"?(n.textContent=`Sex: ${e.strGender||"information missing"}`,n.classList.remove("hidden"),r.classList.add("hidden")):(r.textContent=`Members: ${e.intMembers||"information missing"}`,r.classList.remove("hidden"),n.classList.add("hidden")),document.getElementById("artist-country").textContent=`Country: ${e.strCountry||"information missing"}`,document.getElementById("artist-bio").textContent=`Biography: ${e.strBiographyEN||"information missing"}`;let s="information missing";Array.isArray(e.genres)?s=e.genres.join(", "):typeof e.genres=="string"&&(s=e.genres),document.getElementById("artist-genres").textContent=`Genres: ${s}`;try{const a=await K(e._id);q.innerHTML="",a.albumsList.forEach(u=>{const B=document.createElement("div");B.classList.add("album");const U=u.tracks||[],V=`
        <div class="album-header">
          <span>Track</span>
          <span>Time</span>
          <span></span>
        </div>
      `,G=U.map(h=>{let I="";if(h.movie){const i=document.createElement("a");i.href=h.movie,i.target="_blank",i.rel="noopener",i.classList.add("youtube-link"),i.setAttribute("aria-label","YouTube link");const p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("class","icon-youtube"),p.setAttribute("width","21"),p.setAttribute("height","15");const S=document.createElementNS("http://www.w3.org/2000/svg","use");S.setAttribute("href",`${T}#icon-youtube`),S.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`${T}#icon-youtube`),p.appendChild(S),i.appendChild(p),I=i.outerHTML}return`
            <li>
              <span>${h.strTrack}</span>
                <div class="track-meta">
                  <span>${te(h.intDuration)}</span>
                    ${I}
                </div>
            </li>
          `}).join("");B.innerHTML=`
        <h3>${u.strAlbum}</h3>
        ${V}
        <ul>
          ${G}
        </ul>
      `,q.appendChild(B)})}catch(a){console.error("Error loading albums:",a)}}function w(){y.classList.add("hidden"),document.body.style.overflow="",F.forEach(({el:e,event:t,handler:n})=>e.removeEventListener(t,n)),F=[]}Z.addEventListener("click",w);X.addEventListener("click",w);document.addEventListener("keydown",e=>{e.key==="Escape"&&w()});y.addEventListener("click",e=>{y.querySelector(".modal-content").contains(e.target)||w()});ee.addEventListener("click",e=>{const t=e.target.closest(".js-learn-more");if(!t)return;e.preventDefault();const n=t.dataset.id;n&&ne(n)});const re=document.querySelector(".artist-gallery"),g=document.querySelector(".artists-btn-load");let D=[],v=1;const P=8;let j=0;function ae(e){return`
    <li class="artist-card">
      <img src="${e.strArtistThumb}" alt="${e.strArtist}">
      <ul class="artist-genres">
        ${e.genres.map(t=>`<li class="genre-item">${t}</li>`).join("")}
      </ul>
      <div class="artist-container-info">
      <h3 class="artists-name">${e.strArtist}</h3>
      <p class="artists-info">${e.strBiographyEN.substring(0,100)}...</p>
      </div>
      <a href="./modal.html?id=${e._id}"
         class="link artists-link js-learn-more"
         data-id="${e._id}">
        Learn more<span class="artists-arrow">▶</span>
      </a>
    </li>
  `}function oe(e){return e.map(ae).join("")}async function O(e=1){try{const t=await z(e,P);if(!t.artists||t.artists.length===0){N.error({position:"topRight",message:"No more artists"}),_();return}D=[...D,...t.artists],re.insertAdjacentHTML("beforeend",oe(t.artists)),j=Math.ceil(t.totalArtists/P),ie()}catch(t){console.error("Error loading artists:",t),N.error({title:"Error",message:"Failed to load artists",position:"topRight",color:"red"})}}g.addEventListener("click",async()=>{v+=1,g.disabled=!0,await O(v),g.disabled=!1});function ie(){v<j?ce():_()}function ce(){g.style.display="block"}function _(){g.style.display="none"}O(v);const Y=document.querySelector(".feedback-swiper .swiper-wrapper"),C=document.querySelector(".swiper-button-next"),A=document.querySelector(".swiper-button-prev"),m=document.querySelectorAll(".custom-pagination .dot");function le(e){const t=document.createElement("div");t.classList.add("swiper-slide","feedback-card");const n=Math.round(e.rating??0);let r="";for(let s=1;s<=5;s++)r+=`<span class="star" style="color: ${s<=n?"#764191":"#ffffff"};">★</span>`;return t.innerHTML=`
    <div class="feedback-rating">${r}</div>
    <p class="feedback-text">${e.descr}</p>
    <div class="feedback-author">${e.name}</div>
  `,t}async function de(){try{const t=(await Q()).slice(0,10);t.forEach(r=>Y.appendChild(le(r)));const n=new W(".feedback-swiper",{slidesPerView:1,spaceBetween:20,loop:!1,navigation:{nextEl:C,prevEl:A},keyboard:{enabled:!0},on:{slideChange:function(){A.classList.toggle("swiper-button-disabled",this.isBeginning),C.classList.toggle("swiper-button-disabled",this.isEnd),m.forEach(r=>r.classList.remove("active")),this.activeIndex===0?m[0].classList.add("active"):this.activeIndex===9?m[2].classList.add("active"):m[1].classList.add("active")}}});A.classList.add("swiper-button-disabled"),t.length<=1&&C.classList.add("swiper-button-disabled"),m.forEach(r=>{r.addEventListener("click",()=>{const s=r.dataset.index;s==="first"&&n.slideTo(0),s==="middle"&&n.slideTo(1),s==="last"&&n.slideTo(9)})}),m[0].classList.add("active")}catch(e){console.error("Failed to load feedbacks:",e),Y.innerHTML="<p>Failed to load feedbacks.</p>"}}de();const ue=document.querySelector(".leave-feedback-btn"),d=document.getElementById("feedbackModal"),M=d.querySelector(".feedback-modal-form"),me=d.querySelector(".feedback-modal-close"),c=document.getElementById("user-name"),f=document.getElementById("user-feedback"),l=document.getElementById("ratingValue"),o=document.getElementById("ratingError");function fe(){d.classList.remove("hidden"),document.body.style.overflow="hidden",c.focus()}function $(){d.classList.add("hidden"),document.body.style.overflow="",E(c),E(f),o.textContent=""}ue.addEventListener("click",fe);me.addEventListener("click",$);d.addEventListener("click",e=>{e.target===d&&$()});document.addEventListener("keydown",e=>{e.key==="Escape"&&!d.classList.contains("hidden")&&$()});const R=Array.from(document.querySelectorAll(".modal-star"));function b(e){R.forEach(t=>{const n=Number(t.dataset.value);t.classList.toggle("active",n<=e)})}R.forEach(e=>{e.addEventListener("mouseenter",()=>b(Number(e.dataset.value))),e.addEventListener("mouseleave",()=>b(Number(l.value))),e.addEventListener("click",()=>{l.value=String(Number(e.dataset.value)),b(Number(l.value)),o.textContent=""})});function H(e,t){e.classList.add("input-error"),t&&e===c&&(o.textContent=t),t&&e===f&&(o.textContent=t)}function E(e){e.classList.remove("input-error")}function ye(){let e=!0;o.textContent="";const t=c.value.trim();t.length<2||t.length>50?(H(c,"Name must be 2-50 characters."),e=!1):E(c);const n=f.value.trim();n.length<5||n.length>500?(H(f,"Message must be 5-500 characters."),e=!1):E(f);const r=Number(l.value);return(!r||r<1||r>5)&&(o.textContent="Please select a rating.",e=!1),e}M.addEventListener("submit",async e=>{if(e.preventDefault(),!ye())return;const t={name:c.value.trim(),message:f.value.trim(),rating:Number(l.value)},n=M.querySelector(".feedback-modal-btn"),r=n.textContent;n.disabled=!0,n.textContent="Sending...";try{if(!(await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok){o.textContent="Validation failed. Check your inputs.";return}M.reset(),l.value="0",b(0),$()}catch(s){console.error("Feedback submit failed:",s),o.textContent="Network error. Please try again."}finally{n.disabled=!1,n.textContent=r}});b(Number(l.value));document.addEventListener("DOMContentLoaded",()=>{const e={openBtn:document.querySelector("[data-menu-open]"),closeBtns:document.querySelectorAll("[data-menu-close]"),modal:document.querySelector("[data-menu]")};function t(){e.modal.classList.toggle("is-open"),document.body.classList.toggle("no-scroll")}e.openBtn.addEventListener("click",t),e.closeBtns.forEach(r=>{r.addEventListener("click",t)}),document.querySelectorAll("[data-menu-close-artist], [data-menu-close-aboutus], [data-menu-close-reviews]").forEach(r=>{r.addEventListener("click",t)})});
//# sourceMappingURL=index.js.map
